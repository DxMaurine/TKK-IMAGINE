<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TKK-IMAGEN V.3</title>
    <script>
        // Periksa apakah accessKey ada di sessionStorage
        const accessKey = sessionStorage.getItem("accessKey");
        
        // Jika TIDAK ada (!accessKey), redirect ke login.html
        if (!accessKey) {
            window.location.href = "login.html";
        }
    </script>
</head>
<body>
    <!-- Konten halaman utama di sini -->
    <h1>Selamat datang di TKK IMAGEN TOOL V.3! üéâ</h1>
    <p>Anda berhasil login dengan akses key: <span id="displayKey"></span></p>

    <script>
        // Menampilkan accessKey di halaman (opsional)
        document.getElementById("displayKey").textContent = accessKey;
    </script>
</body>

<!DOCTYPE html>
<html>
<head>
    <title>TKK Imagine WebTool V.3</title>
  
</head>
<body>
    <header class="main-header">
  <div class="header-container">
    <!-- Logo/Brand -->
    <div class="logo-container">
      <a href="#" class="logo">
        <span class="logo-icon">üé®</span>
        <span class="logo-text">TKK IMAGEN</span>
      </a>
    </div>

    <!-- Desktop Navigation -->
    <nav class="main-nav">
      <ul class="nav-list">
        <li class="nav-item"><a href="#" class="nav-link active">Home</a></li>
        <li class="nav-item"><a href="#" class="nav-link">Product</a></li>
        <li class="nav-item"><a href="#" class="nav-link">Gallery</a></li>
        <li class="nav-item"><a href="#" class="nav-link">Documentation</a></li>
        <li class="nav-item"><a href="#" class="nav-link">About</a></li>
      </ul>
    </nav>

    <!-- Desktop Auth Buttons -->
    <div class="auth-buttons">
      <a href="#" class="btn btn-login">Login</a>
      <a href="#" class="btn btn-signup">Sign Up</a>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <!-- Mobile Menu (hidden by default) -->
  <div class="mobile-menu" id="mobileMenu">
    <nav class="mobile-nav">
      <ul class="mobile-nav-list">
        <li><a href="#" class="mobile-nav-link active">Home</a></li>
        <li><a href="#" class="mobile-nav-link">Product</a></li>
        <li><a href="#" class="mobile-nav-link">Gallery</a></li>
        <li><a href="#" class="mobile-nav-link">Documentation</a></li>
        <li><a href="#" class="mobile-nav-link">About</a></li>
        <li class="mobile-auth-buttons">
          <a href="#" class="btn btn-login">Login</a>
          <a href="#" class="btn btn-signup">Sign Up</a>
        </li>
      </ul>
    </nav>
  </div>
</header>


<style>
  /* Base Styles */
  .main-header {
    background-color: #ffffff;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
    padding: 0.8rem 0;
  }

  .header-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  /* Logo Styles */
  .logo {
    display: flex;
    align-items: center;
    text-decoration: none;
    font-weight: 700;
    font-size: 1.5rem;
    color: #333;
  }

  .logo-icon {
    margin-right: 0.5rem;
    font-size: 1.8rem;
  }

  .logo-text {
    background: linear-gradient(90deg, #6e45e2, #88d3ce);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* Navigation Styles */
  .main-nav .nav-list {
    display: flex;
    list-style: none;
    gap: 1.5rem;
  }

  .nav-link {
    text-decoration: none;
    color: #555;
    font-weight: 500;
    padding: 0.5rem 0;
    position: relative;
    transition: color 0.3s ease;
  }

  .nav-link:hover {
    color: #6e45e2;
  }

  .nav-link.active {
    color: #6e45e2;
    font-weight: 600;
  }

  .nav-link.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: #6e45e2;
  }

  /* Auth Buttons */
  .auth-buttons {
    display: flex;
    gap: 1rem;
  }

  .btn {
    padding: 0.5rem 1.2rem;
    border-radius: 5px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .btn-login {
    color: #6e45e2;
    border: 1px solid #6e45e2;
  }

  .btn-login:hover {
    background-color: #f0ebfa;
  }

  .btn-signup {
    background-color: #6e45e2;
    color: white;
  }

  .btn-signup:hover {
    background-color: #5a35c9;
  }

  /* Mobile Menu Toggle (hidden on desktop) */
  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 1.5rem;
    color: #333;
    cursor: pointer;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .main-nav, .auth-buttons {
      display: none;
    }

    .mobile-menu-toggle {
      display: block;
    }

    .header-container {
      padding: 0 1rem;
    }
  }


  /* Mobile Menu Styles */
 :root {
  --bg-color: #ffffff;
  --text-color: #333333;
  --primary-color: #6e45e2;
  --hover-color: #f0ebff;
  --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  --border-radius: 16px;
}


.mobile-menu {
  display: none;
  background-color: var(--bg-color);
  box-shadow: var(--shadow);
  position: fixed;
  top: 60px;
  right: 20px;
  width: 90%;
  max-width: 320px;
  border-radius: var(--border-radius);
  z-index: 1000;
  padding: 1rem 0;
  animation: slideIn 0.4s cubic-bezier(0.23, 1, 0.32, 1);
  transform-origin: top right;
  overflow: hidden;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.mobile-nav-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.mobile-nav-item {
  margin: 0.25rem 1rem;
  border-radius: 12px;
  overflow: hidden;
}

.mobile-nav-link {
  display: flex;
  align-items: center;
  padding: 0.9rem 1.5rem;
  text-decoration: none;
  color: var(--text-color);
  font-weight: 500;
  transition: all 0.3s ease;
  border-radius: 12px;
}

.mobile-nav-link:hover, 
.mobile-nav-link.active {
  background-color: var(--bg-secondary);
  color: var(--primary-color);
  transform: translateX(4px);
  width: 80%;
}

.mobile-nav-link i {
  margin-right: 10px;
  font-size: 1.1rem;
}

.mobile-auth-buttons {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  margin-top: 0.5rem;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
}

.mobile-auth-buttons .btn {
  width: 90%;
  text-align: center;
  padding: 0.8rem;
  border-radius: 12px;
  font-weight: 500;
}

/* Animations */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: scale(0.8) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .main-nav, .auth-buttons {
    display: none;
  }

  .mobile-menu-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 1.5rem;
    cursor: pointer;
    transition: transform 0.3s ease;
  }

  .mobile-menu-toggle.active {
    transform: rotate(90deg);
  }

  .header-container {
    padding: 0 1.5rem;
  }

  /* Show menu when active */
  .mobile-menu.active {
    display: block;
  }
}

@media (min-width: 769px) {
  .mobile-menu,
  .mobile-menu-toggle {
    display: none !important;
  }
  
  .main-nav, .auth-buttons {
    display: flex;
  }
}

/* Backdrop effect */
.mobile-menu-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 999;
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease-out;
}
</style>

<script>
  // Mobile Menu Toggle Functionality
  const mobileMenuToggle = document.getElementById('mobileMenuToggle');
  const mobileMenu = document.getElementById('mobileMenu');

  mobileMenuToggle.addEventListener('click', () => {
    const isOpen = mobileMenu.style.display === 'block';
    mobileMenu.style.display = isOpen ? 'none' : 'block';
    mobileMenuToggle.innerHTML = isOpen 
      ? '<i class="fas fa-bars"></i>' 
      : '<i class="fas fa-times"></i>';
  });

  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!mobileMenu.contains(e.target) && e.target !== mobileMenuToggle) {
      mobileMenu.style.display = 'none';
      mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';
    }
  });
</script>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <main>
        <div class="instagram-container">
            <div class="app-header">
                <div class="logo">üî• TKK IMAGINE WEBTOOL V.3 üî•</div>
                <div class="header-icons"></div>
            </div>
            
            <div class="options-container">
                <div class="option-row">
                    <label for="modelSelect">Model AI:</label>
                    <select id="modelSelect">
                        <option value="flux">Flux</option>
                        <option value="flux-anime">Flux Anime</option>
                        <option value="flux-3d">Flux 3D</option>
                        <option value="turbo">Turbo</option>
                        <option value="flux-pro">Flux Pro</option>
                        <option value="flux-realism">Flux Realism</option>
                        <option value="gptimage">GPT Image</option>
                    </select>
                </div>
                
                <div class="option-row">
                    <label for="formatSelect">Format Gambar:</label>
                    <select id="formatSelect">
                        <option value="default">Default (9:16, 1080√ó1920)</option>
                        <option value="square">Persegi (1:1, 1080√ó1080)</option>
                        <option value="landscape">Lanskap (16:9, 1920√ó1080)</option>
                        <option value="landscape_large">Lanskap Besar (16:9, 2560√ó1440)</option>
                        <option value="portrait_large">Potret WHD (9:16, 1440√ó2560)</option>
                    </select>
                </div>
                
                <div class="option-row">
                    <label for="enhanceCheck">Tingkatkan Kualitas:</label>
                    <input type="checkbox" id="enhanceCheck">
                    <span class="tooltip">‚úì Menggunakan model tambahan untuk mengoptimalkan prompt Anda</span>
                </div>
            </div>
            
            <div class="style-sections">
                <div class="section highlighted-section">
                    <h3>Cyberpunk Creation <span class="feature-hint">Tambahkan gaya cyberpunk di awal prompt</span></h3>
                    <div class="select-container">
                        <select id="cyberpunkStyleSelect" class="style-select" onchange="selectCyberpunkStyle(this)">
                            <option value="">-- Pilih Gaya Cyberpunk --</option>
                        </select>
                    </div>
                    <div class="style-tip">
                        <p>üí° Tip: Gaya ini ditambahkan di awal prompt untuk pengaruh kuat</p>
                    </div>
                </div>
                
                <div class="section highlighted-section">
                    <h3>Style Art <span class="feature-hint">Pilih gaya seni untuk gambar anda</span></h3>
                    <div class="select-container">
                        <select id="artStyleSelect" class="style-select" onchange="selectArtStyle(this)">
                            <option value="">-- Pilih Gaya Seni --</option>
                        </select>
                    </div>
                    <div class="style-tip">
                        <p>üí° Tip: Hasilkan gambar yang sama dengan gaya seni yang dipilih</p>
                    </div>
                </div>
                
                <div class="section">
                    <h3>Camera Effects <span class="feature-hint">(ditambahkan secara otomatis ke prompt)</span></h3>
                    <div class="select-container">
                        <select id="cameraEffectSelect" class="style-select" onchange="selectCameraEffect(this)">
                            <option value="">-- Pilih Efek Kamera --</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="prompt-container">
                <textarea id="promptInput" placeholder="Tulis Prompt Disini..."></textarea>
                <div class="prompt-preview">
                    <p>Final Prompt: <span id="finalPromptDisplay">Prompt Anda akan muncul di sini...</span></p>
                </div>
                <div class="controls">
                    <button id="generateBtn" onclick="generateAiImage()">Generate Gambar</button>
                    <div class="counter"><span id="genCount">0</span></div>
                </div>
            </div>
            <div class = "tombolcp">
                    <button id="deletePrompt" onclick="hapusText()">‚ùåDelete</button>
                    <button id="copyPaste" onclick="copyFinalPrompt()">üìúCopy</button>
                    <button id="pastePrompt" onclick="pasteFinalPrompt()">üìãPaste</button>
                    <button id="resetAll" onclick="bukaPopupReset()">üîÑReset</button>
                    <!-- Trigger -->
                    <button id="upscale" onclick="openToolboxPopup()">üîßToolbox</button>

                    <!-- Popup Toolbox -->
                  <div id="toolboxPopup" class="popup-overlay">
                    <div class="popup-box">
                      <h3>üß∞ Toolbox Gambar</h3>
                      <button onclick="upscaleImg()">üîç Upscale Gambar</button>
                      <button onclick="removeBackground()">üßº Remove Background</button>
                      <button onclick="enhanceImage()">üé® Enhance Warna</button>
                      <button onclick="closeToolboxPopup()">‚ùå Tutup</button>
                    </div>
                  </div>
                </div>
                <!-- Popup -->
                <div id="popupReset" class="popup-overlay">
                <div class="popup-box">
                    <p>Yakin ingin mereset semua pengaturan?</p>
                    <div class="popup-buttons">
                    <button onclick="konfirmasiReset(true)">‚úÖ Yes</button>
                    <button onclick="konfirmasiReset(false)">‚ùå No</button>
                    </div>
                  </div>
                </div>
            <!-- ini adalah setting gambar 4 container--> 
            <div class="result-container">
                <div class="image-grid">
                    <!-- Image Container 0 -->
                    <div class="image-container" id="resultImageContainer0">
                        <p class="initialMessage">Gambar yang dihasilkan AI akan muncul di sini</p>
                        <img class="resultImage" hidden onclick="previewImage(this)">
                        <span class="close" onclick="closeModal()" hidden>√ó</span>
                        <div class="statusMessage" hidden></div>
                        <button class="regenerate-style-btn" onclick="regenerateWithStyle(0)" hidden>Generate ulang</button>
                        <button class="download-image-btn" onclick="downloadImage(0)" hidden>Unduh Gambar</button>
                    </div>
                    
                    <!-- Image Container 1 -->
                    <div class="image-container" id="resultImageContainer1">
                        <p class="initialMessage">Gambar yang dihasilkan AI akan muncul di sini</p>
                        <img class="resultImage" hidden onclick="previewImage(this)">
                        <span class="close" onclick="closeModal()" hidden>√ó</span>
                        <div class="statusMessage" hidden></div>
                        <button class="regenerate-style-btn" onclick="regenerateWithStyle(1)" hidden>Generate ulang</button>
                        <button class="download-image-btn" onclick="downloadImage(1)" hidden>Unduh Gambar</button>
                    </div>
                    
                    <!-- Image Container 2 -->
                    <div class="image-container" id="resultImageContainer2">
                        <p class="initialMessage">Gambar yang dihasilkan AI akan muncul di sini</p>
                        <img class="resultImage" hidden onclick="previewImage(this)">
                        <span class="close" onclick="closeModal()" hidden>√ó</span>
                        <div class="statusMessage" hidden></div>
                        <button class="regenerate-style-btn" onclick="regenerateWithStyle(2)" hidden>Generate ulang</button>
                        <button class="download-image-btn" onclick="downloadImage(2)" hidden>Unduh Gambar</button>
                    </div>
                    
                    <!-- Image Container 3 -->
                    <div class="image-container" id="resultImageContainer3">
                        <p class="initialMessage">Gambar yang dihasilkan AI akan muncul di sini</p>
                        <img class="resultImage" hidden onclick="previewImage(this)">
                        <span class="close" onclick="closeModal()" hidden>√ó</span>
                        <div class="statusMessage" hidden></div>
                        <button class="regenerate-style-btn" onclick="regenerateWithStyle(3)" hidden>Generate ulang</button>
                        <button class="download-image-btn" onclick="downloadImage(3)" hidden>Unduh Gambar</button>
                    </div>
                </div>
                <!--ini adalah tombol downloadAll-->
                <div class="image-actions">
                    <div class="action-icons">
                        <span class="action-icon" id="downloadAllBtn" onclick="downloadAllImages()" hidden>&#10515; unduh semua gambar</span>
                    </div>
    </main>
    
    <!-- Theme switch button now at the bottom center -->
    <div class="theme-switch-container">
        <div class="theme-switch" id="themeSwitch">
            <div class="switch-handle"></div>
        </div>
        <span class="theme-label">Switch Theme</span>
    </div>
    
    <!-- Floating Social Icons -->
    
   <!-- Floating Social Icons + Prompt Suggestion -->
<div class="floating-social-icons">
  <!-- Prompt Suggestion Trigger -->
  <div class="prompt-suggestion">
    <button class="suggestion-trigger" title="Bantuan Cepat">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M9 18h6"></path>
      <path d="M10 22h4"></path>
      <path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8a6 6 0 0 0-12 0 4.65 4.65 0 0 0 1.5 3.5c.76.76 1.23 1.52 1.41 2.5"></path>
    </svg>
  </button>
  </div>
  
  <!-- Social Icons -->
  <a href="https://www.facebook.com/groups/407347088866675" target="_blank" class="social-icon fb">
    <img src="https://cdn-icons-png.flaticon.com/512/5968/5968764.png" width="64" alt="Facebook">
  </a>
  <!--<a href="https://wa.me/6281234567890" target="_blank" class="social-icon wa">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" width="64" alt="WhatsApp">
  </a>-->
</div>

<!-- Prompt Suggestion Modal -->
<div class="prompt-modal" id="promptModal">
  <div class="modal-content">
    <button class="close-modal"></button>
    <h3>Prompt Cepat!</h3>
    <div class="prompt-list">
     <button class="prompt-item">üñºÔ∏è Cyberpunk cityscape at neon night, 4K ultra-detailed</button>
      <button class="prompt-item">üåå Galaxy warrior with laser sword, digital art style</button>
      <button class="prompt-item">üêâ Mythical dragon in misty mountains, fantasy art</button>
    </div>
  </div>
</div>

<style>
  :root {
    --bg-color: #ffffff;
    --text-color: #333333;
    --modal-bg: #f9f9f9;
    --border-color: #e0e0e0;
    --primary-color: #4285f4;
    --hover-color: #f1f1f1;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --bg-color: #1e1e1e;
      --text-color: #f0f0f0;
      --modal-bg: #2d2d2d;
      --border-color: #444444;
      --primary-color: #8ab4f8;
      --hover-color: #797979;
    }
  }

  .floating-social-icons {
    position: fixed;
    right: 20px;
    bottom: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    z-index: 1000;
  }

  .prompt-suggestion {
    margin-bottom: 10px;
  }
  
  .suggestion-trigger {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
  }
  
  .suggestion-trigger:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 12px rgba(66, 66, 66, 0.15);
  }
  
  .suggestion-trigger svg {
    width: 28px;
    height: 28px;
    color: white;
  }

  .prompt-modal {
    display: none;
    position: fixed;
    right: 30px;
    bottom: 150px;
    width: 350px;
    height: 300px;
    background: var(--bg-color);
    border: 1px solid var(--text-color-dark);
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(255, 246, 218, 0.719);
    z-index: 1001;
    color: var(--text-color);
  }

  .modal-content {
    padding: 20px;
    position: relative;
  }

  .close-modal {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 1.5em;
    cursor: pointer;
    color: var(--text-color);
  }

  .prompt-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 15px;
  }

  .prompt-item {
    padding: 10px 15px;
    background: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    text-align: left;
    cursor: pointer;
    transition: background 0.2s;
    color: var(--text-color);
  }

  .prompt-item:hover {
    background: var(--hover-color);
  }

  .social-icon img {
    transition: transform 0.3s;
  }

  .social-icon img:hover {
    transform: scale(1.1);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const trigger = document.querySelector('.suggestion-trigger');
    const modal = document.getElementById('promptModal');
    const closeBtn = document.querySelector('.close-modal');
    const promptItems = document.querySelectorAll('.prompt-item');
    const promptTextarea = document.getElementById('promptInput'); // Changed to match your container

    
    trigger.addEventListener('click', function() {
      modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
    });

    closeBtn.addEventListener('click', function() {
      modal.style.display = 'none';
    });

    promptItems.forEach(item => {
      item.addEventListener('click', function() {
        alert('Prompt dipilih: "' + this.textContent + '"');
        modal.style.display = 'none';
        promptTextarea.value = this.textContent;
      });
    });

    window.addEventListener('click', function(event) {
      if (event.target === modal) {
        modal.style.display = 'none';
      }
    });
  });
</script>
  
</body>
  <!-- Bubble Chat -->
    <div id="chat-bubble" onclick="toggleChat()">üí¨</div>

    <!-- Panel Chat -->
    <div id="chat-panel">
      <div class="chat-header">
        TKK ChatBot
        <span style="cursor:pointer;" onclick="toggleChat()">‚ùå</span>
      </div>
      <div class="chat-body" id="chat-body"></div>
      <div class="chat-input">
        <input id="user-input" placeholder="Ketik pesan..." />
        <button onclick="sendMessage()">‚û§</button>
      </div>
    </div>


 <footer class="custom-footer">
        <div class="footer-thanks">
          Thanks To: <strong>REMBOL TEAM'S</strong> dan <strong>TKK FB GROUP</strong>
        </div>
        <div class="footer-caption">Best Free AI image generator</div>
        <div class="footer-copyright">
          ¬© 2025 | Support By ‚ô•Ô∏è <strong>REMBOL TEAM'S</strong>
        </div>
      </footer>
</html>
    
    <style>
    /* Import font - removed and replaced with sans-serif bold */
    /* @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap'); */
    

    :root {
      /* Light theme (default) - Enhanced for 3D neumorphic design */
      --bg-color: threedface;
      --bg-secondary: #e2e3ea;
      --bg-tertiary: #eaebf5;
      --text-color: #525252;
      --text-color-dark: #ff0000;
      --text-color-light: #777991;
      --box-shadow-convex: 5px 5px 10px #c8c9d1, -5px -5px 10px #ffffff;
      --box-shadow-concave: inset 5px 5px 10px #c8c9d1, inset -5px -5px 10px #ffffff;
      --box-shadow-pressed: inset 3px 3px 5px #c8c9d1, inset -3px -3px 5px #ffffff;
      --border-color: #d1d9e6;
      --highlight-color: #f4f4f8;
      --border-radius: 15px;
      --gradient-light: linear-gradient(145deg, #f0f0f8, #e2e3ea);
      --gradient-dark: linear-gradient(145deg, #e2e3ea, #f0f0f8);
    }
    
    [data-theme="dark"] {
      --bg-color: #2d3035;
      --bg-secondary: #252830;
      --bg-tertiary: #1f2229;
      --text-color: #b1b7c3;
      --text-color-dark: #00cc00;
      --text-color-light: #868a96;
      --box-shadow-convex: 5px 5px 10px #1c1f24, -5px -5px 10px #3e4146;
      --box-shadow-concave: inset 5px 5px 10px #1c1f24, inset -5px -5px 10px #3e4146;
      --box-shadow-pressed: inset 3px 3px 5px #1c1f24, inset -3px -3px 5px #3e4146;
      --border-color: #1a1d23;
      --highlight-color: #333842;
      --border-radius: 15px;
      --gradient-light: linear-gradient(145deg, #323539, #282b31);
      --gradient-dark: linear-gradient(145deg, #282b31, #323539);
    }
    
    body {
      font-family: sans-serif;
      font-weight: bold;
      margin: 0;
      padding: 0;
      background-color: var(--bg-color);
      text-align: left;
      color: var(--text-color);
      transition: background-color 0.3s, color 0.3s;
      min-height: 100vh;
      position: relative;
      padding-bottom: 80px; /* Space for the theme switch at bottom */
    }
    
    /* Header with title - enhanced 3D */
    header {
      background: var(--gradient-light);
      padding: 25px 0;
      text-align: center;
      margin-bottom: 30px;
      border-radius: 0 0 var(--border-radius) var(--border-radius);
      box-shadow: var(--box-shadow-convex);
    }
    
    .title-container {
      position: relative;
      z-index: 5;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    #logoImg {
      height: 60px;
      width: auto;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow-convex);
      transition: transform 0.3s ease;
    }
    
    #logoImg:hover {
      transform: scale(1.05);
    }
    
    .small-logo {
      height: 30px;
      width: auto;
      border-radius: 8px;
      margin-right: 10px;
      vertical-align: middle;
      box-shadow: var(--box-shadow-convex);
    }
    
    #titleEl {
      color: var(--text-color-dark);
      font-size: 2.5rem;
      font-weight: 600;
      margin: 0;
      letter-spacing: 1px;
      position: relative;
      /* Enhanced 3D text effect */
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1), -2px -2px 4px rgba(255,255,255,0.3);
    }
    
    /* Theme switch - now centered at bottom */
    .theme-switch-container {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      background: var(--gradient-light);
      padding: 15px 20px;
      border-radius: 20px;
      box-shadow: var(--box-shadow-convex);
    }
    
    .theme-switch {
      width: 43px;
      height: 12px;
      background-color: var(--bg-tertiary);
      border-radius: 10px;
      position: relative;
      cursor: pointer;
      box-shadow: var(--box-shadow-concave);
      transition: all 0.3s ease;
    }
    
    .switch-handle {
      width: 10px;
      height: 10px;
      background: var(--gradient-light);
      border-radius: 50%;
      position: absolute;
      top: 2px;
      left: 2px;
      box-shadow: var(--box-shadow-convex);
      transition: all 0.3s ease;
    }
    
    [data-theme="dark"] .switch-handle {
      left: 33px;
    }
    
    .theme-label {
      font-size: 12px;
      color: var(--text-color);
      font-weight: 500;
    }
    
    /* Main content container */
    main {
      max-width: 600px;
      margin: 20px auto;
      padding: 0 15px;
    }
    
    .instagram-container {
      background: var(--gradient-light);
      border-radius: var(--border-radius);
      overflow: hidden;
      position: relative;
      /* Enhanced 3D convex effect */
      box-shadow: var(--box-shadow-convex);
    }
    
    /* App header */
    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: var(--gradient-dark);
      position: relative;
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      border-radius: var(--border-radius) var(--border-radius) 0 0;
    }
    
    .logo {
      font-weight: 600;
      color: var(--text-color-dark);
      font-size: 18px;
      /* Enhanced 3D text effect */
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1), -2px -2px 4px rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
    }
    
    .header-icons {
      display: flex;
      gap: 15px;
    }
    
    .icon {
      font-size: 16px;
      cursor: pointer;
      position: relative;
      z-index: 1;
      padding: 10px;
      border-radius: 50%;
      background: var(--gradient-light);
      box-shadow: var(--box-shadow-convex);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
    }
    
    .icon:hover {
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(2px);
    }
    
    /* Prompt input container */
    .prompt-container {
      padding: 20px;
      background: var(--gradient-light);
      position: relative;
      /* Enhanced 3D effect */
      box-shadow: var(--box-shadow-concave);
      margin: 15px;
      border-radius: var(--border-radius);
    }
    
    #promptInput {
      width: 90%;
      height: 120px;
      padding: 15px;
      border-radius: var(--border-radius);
      margin-bottom: 15px;
      font-size: 16px;
      resize: none;
      border: none;
      font-family: sans-serif;
      font-weight: bold;
      background: var(--bg-tertiary);
      color: var(--text-color);
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      transition: all 0.3s;
    }
    
    #promptInput:focus {
      outline: none;
      box-shadow: var(--box-shadow-pressed);
    }
    
    .prompt-preview {
      margin-bottom: 15px;
      padding: 15px;
      border-radius: var(--border-radius);
      font-size: 14px;
      background: var(--bg-tertiary);
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      overflow-wrap: break-word;
      word-wrap: break-word;
      word-break: break-word;
    }
    
    .prompt-preview p {
      margin: 0;
      color: var(--text-color-light);
    }
    
    #finalPromptDisplay {
      font-weight: 500;
      color: var(--text-color);
    }
    
    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    #generateBtn {
      font-family: sans-serif;
      font-weight: bold;
      background: var(--gradient-light);
      color: var(--text-color-dark);
      border: none;
      border-radius: var(--border-radius);
      padding: 12px 20px;
      cursor: pointer;
      transition: all 0.3s;
      /* Enhanced 3D convex effect */
      box-shadow: var(--box-shadow-convex);
      position: relative;
      font-size: 15px;
    }
    
    #generateBtn:hover {
      transform: translateY(2px);
      box-shadow: 3px 3px 6px rgba(0,0,0,0.15), -3px -3px 6px rgba(255,255,255,0.25);
    }
    
    #generateBtn:active {
      /* Enhanced 3D pressed effect */
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(4px);
    }
    
    #generateBtn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }
      
    /*ResetAll*/

    #resetAll {
      font-family: sans-serif;
      font-weight: bold;
      background: var(--gradient-light);
      color: var(--text-color-dark);
      border: none;
      border-radius: var(--border-radius);
      padding: 12px 16px; /* Perbaikan dari '12px px' */
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: var(--box-shadow-convex);
      position: relative;
      font-size: 15px;
      margin-top: 10px;
      margin-bottom: 10px;

    /* Tambahan: beri jarak dari tombol sebelumnya */
      margin-left: 12px;
    }

    
    #resetAll:hover {
      transform: translateY(2px);
      box-shadow: 3px 3px 6px rgba(0,0,0,0.15), -3px -3px 6px rgba(255,255,255,0.25);
    }
    
    #resetAll:active {
      /* Enhanced 3D pressed effect */
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(4px);
    }
    
    #resetAll:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    

    /*tombol hapus*/
      
     #deletePrompt {
        font-family: sans-serif;
        font-weight: bold;
        background: var(--gradient-light);
        color: var(--text-color-dark);
        border: none;
        border-radius: var(--border-radius);
        padding: 12px; /* ‚Üê kamu juga punya '12px px' yang error */
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: var(--box-shadow-convex);
        position: relative;
        font-size: 15px;

        /* Tambahan: beri jarak dari kiri */
        margin-left: 16px; /* atau 1rem, 20px, dll */
        }

    
    #deletePrompt:hover {
      transform: translateY(2px);
      box-shadow: 3px 3px 6px rgba(0,0,0,0.15), -3px -3px 6px rgba(255,255,255,0.25);
    }
    
    #deletePrompt:active {
      /* Enhanced 3D pressed effect */
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(4px);
    }
    
    #deletePrompt:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }
      
    /*Tombol Copy*/
      
    #copyPaste {
        font-family: sans-serif;
        font-weight: bold;
        background: var(--gradient-light);
        color: var(--text-color-dark);
        border: none;
        border-radius: var(--border-radius);
        padding: 12px 16px; /* Perbaikan dari '12px px' */
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: var(--box-shadow-convex);
        position: relative;
        font-size: 15px;

        /* Tambahan: beri jarak dari tombol sebelumnya */
        margin-left: 12px;
        }

    
    #copyPaste:hover {
      transform: translateY(2px);
      box-shadow: 3px 3px 6px rgba(0,0,0,0.15), -3px -3px 6px rgba(255,255,255,0.25);
    }
    
    #copyPaste:active {
      /* Enhanced 3D pressed effect */
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(4px);
    }
    
    #copyPaste:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    /*Tombol paste*/
      
      #pastePrompt {
        font-family: sans-serif;
        font-weight: bold;
        background: var(--gradient-light);
        color: var(--text-color-dark);
        border: none;
        border-radius: var(--border-radius);
        padding: 12px 16px; /* Perbaikan dari '12px px' */
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: var(--box-shadow-convex);
        position: relative;
        font-size: 15px;

        /* Tambahan: beri jarak dari tombol sebelumnya */
        margin-left: 12px;
        }

    
    #pastePrompt:hover {
      transform: translateY(2px);
      box-shadow: 3px 3px 6px rgba(0,0,0,0.15), -3px -3px 6px rgba(255,255,255,0.25);
    }
    
    #pastePrompt:active {
      /* Enhanced 3D pressed effect */
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(4px);
    }
    
    #pastePrompt:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    /*Upscalebtn*/

    #upscale {
        font-family: sans-serif;
        font-weight: bold;
        background: var(--gradient-light);
        color: var(--text-color-dark);
        border: none;
        border-radius: var(--border-radius);
        padding: 12px 16px; /* Perbaikan dari '12px px' */
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: var(--box-shadow-convex);
        position: relative;
        font-size: 15px;

        /* Tambahan: beri jarak dari tombol sebelumnya */
        margin-left: 12px;
        }

    
    #upscale:hover {
      transform: translateY(2px);
      box-shadow: 3px 3px 6px rgba(0,0,0,0.15), -3px -3px 6px rgba(255,255,255,0.25);
    }
    
    #upscale:active {
      /* Enhanced 3D pressed effect */
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(4px);
    }
    
    #upscale:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }




    /*historigrid*/
      .history-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 20px;
    }
    .history-grid img {
      width: 100%;
      height: auto;
      object-fit: cover;
      border: 1px solid #ccc;
      cursor: pointer;
    }
    
      
    .counter {
      font-size: 14px;
      color: var(--text-color-light);
      padding: 10px 15px;
      border-radius: var(--border-radius);
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      background: var(--bg-tertiary);
    }
    
    /* Options container */
    .options-container {
      padding: 20px;
      background: var(--gradient-light);
      position: relative;
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      margin: 15px;
      border-radius: var(--border-radius);
    }
    
    .option-row {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      position: relative;
    }
    
    .option-row label {
      width: 120px;
      font-size: 14px;
      color: var(--text-color);
      font-weight: 500;
    }
    
    .option-row select, .option-row input[type="checkbox"] {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: var(--border-radius);
      font-size: 14px;
      background: var(--bg-tertiary);
      color: var(--text-color);
      font-family: sans-serif;
      font-weight: bold;
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      transition: all 0.3s;
    }
    
    .option-row select:focus {
      outline: none;
      box-shadow: var(--box-shadow-pressed);
    }
    
    .option-row input[type="checkbox"] {
      flex: 0;
      width: 24px;
      height: 24px;
      margin-right: 10px;
      cursor: pointer;
      appearance: none;
      -webkit-appearance: none;
      border-radius: 6px;
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
    }
    
    .option-row input[type="checkbox"]:checked {
      background-color: var(--text-color);
      /* Enhanced 3D convex effect when checked */
      box-shadow: var(--box-shadow-convex);
    }
    
    .tooltip {
      margin-left: 10px;
      font-size: 13px;
      color: var(--text-color-light);
    }
    
    /* Art styles sections */
    .style-sections {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      background: var(--gradient-light);
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      margin: 15px;
      border-radius: var(--border-radius);
    }
    
    .section h3 {
      margin: 0 0 15px 0;
      color: var(--text-color-dark);
      font-size: 18px;
      padding-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-weight: 600;
      /* Enhanced 3D text effect */
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1), -1px -1px 2px rgba(255,255,255,0.2);
      border-bottom: 1px solid var(--border-color);
    }
    
    .highlighted-section {
      position: relative;
      padding: 15px;
      background: var(--gradient-light);
      border-radius: var(--border-radius);
      /* Enhanced 3D convex effect */
      box-shadow: var(--box-shadow-convex);
    }
    
    .highlighted-section:hover {
      transform: translateY(-2px);
      box-shadow: 6px 6px 12px rgba(0,0,0,0.15), -6px -6px 12px rgba(255,255,255,0.25);
    }
    
    .style-tip {
      border-radius: var(--border-radius);
      padding: 12px;
      margin-top: 10px;
      background: var(--bg-tertiary);
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
    }
    
    .style-tip p {
      margin: 0;
      color: var(--text-color-light);
      font-weight: 400;
      font-size: 13px;
    }
    
    .feature-hint {
      font-size: 13px;
      color: var(--text-color-light);
      font-weight: normal;
    }
    
    /* Select styles */
    
    
      
    .select-container {
      width: 100%;
      position: relative;
      margin-bottom: 10px;
    }
    
    .style-select {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: var(--border-radius);
      font-size: 14px;
      background: var(--bg-tertiary);
      color: var(--text-color);
      font-family: sans-serif;
      font-weight: bold;
      appearance: none;
      cursor: pointer;
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      transition: all 0.3s;
    }
    
    .style-select:focus {
      outline: none;
      box-shadow: var(--box-shadow-pressed);
    }
    
    .select-container::after {
      content: '‚ñº';
      font-size: 12px;
      color: var(--text-color-light);
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
    }
    
    .style-select option {
      background-color: var(--bg-secondary);
      color: var(--text-color);
      padding: 10px;
    }
    
    /* Result container */
    .result-container {
      margin-top: 10px;
    }
    
    /* Image grid layout */
    .image-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      padding: 20px;
      background: var(--gradient-light);
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      margin: 15px;
      border-radius: var(--border-radius);
      justify-content: center;
    }
    
    .image-container {
      min-width: 180px;
      max-width: 100%;
      width: auto;
      min-height: 180px;
      height: auto;
      background: var(--bg-tertiary);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: var(--border-radius);
      overflow: hidden;
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      transition: all 0.3s;
      padding: 10px;
      flex-basis: calc(50% - 15px);
      flex-grow: 1;
    }
    
    .image-container:hover {
      transform: translateY(-2px);
      box-shadow: var(--box-shadow-pressed);
    }
    
    .initialMessage, .statusMessage {
      color: var(--text-color-light);
      font-size: 13px;
      text-align: center;
      padding: 10px;
      max-width: 100%;
      overflow-wrap: break-word;
      word-wrap: break-word;
      word-break: break-word;
    }
    
    .statusMessage {
      position: absolute;
      bottom: 10px;
      background: var(--gradient-light);
      padding: 8px 12px;
      border-radius: 20px;
      font-weight: 500;
      font-size: 12px;
      max-width: 90%;
      margin: 0 auto;
      left: 50%;
      transform: translateX(-50%);
      /* Enhanced 3D convex effect */
      box-shadow: var(--box-shadow-convex);
    }
    
    .resultImage {
      width: 100%;
      height: auto;
      object-fit: contain;
      border-radius: var(--border-radius);
      /* Enhanced 3D convex effect */
      box-shadow: var(--box-shadow-convex);
      transition: all 0.3s;
    }
    
    .resultImage:hover {
      transform: scale(1.02);
      box-shadow: 6px 6px 12px rgba(0,0,0,0.15), -6px -6px 12px rgba(255,255,255,0.25);
    }
    
    /* Regenerate button */
    .regenerate-style-btn {
      position: absolute;
      bottom: 20px;
      background: var(--gradient-light);
      border: none;
      border-radius: 10px;
      padding: 10px 12px;
      color: var(--text-color);
      font-family: sans-serif;
      font-weight: bold;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s;
      /* Enhanced 3D convex effect */
      box-shadow: var(--box-shadow-convex);
      z-index: 10;
      max-width: 90%;
      width: auto; /* Changed from fixed width to auto */
      white-space: normal; /* Allow text to wrap */
      overflow-wrap: break-word;
      word-wrap: break-word;
      word-break: break-word;
    }
    
    .regenerate-style-btn:hover {
      transform: translateY(-2px);
      box-shadow: 4px 4px 8px rgba(0,0,0,0.15), -4px -4px 8px rgba(255,255,255,0.25);
    }
    
    .regenerate-style-btn:active {
      /* Enhanced 3D pressed effect */
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(0);
    }
    
    /* Download image button */
        .download-image-btn {
            position: absolute;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-light);
            border: none;
            border-radius: 10px;
            padding: 10px 12px;
            color: var(--text-color);
            font-family: sans-serif;
            font-weight: bold;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--box-shadow-convex);
            z-index: 10;
            max-width: 90%;
            width: auto;
            white-space: normal;
            overflow-wrap: break-word;
            word-wrap: break-word;
            word-break: break-word;
        }

        .download-image-btn:hover {
            transform: translateX(-50%) translateY(-2px);
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.15), -4px -4px 8px rgba(255, 255, 255, 0.25);
        }

        .download-image-btn:active {
        box-shadow: var(--box-shadow-pressed);
        transform: translateX(-50%) translateY(0);
        }

    
    .image-actions {
      padding: 20px;
      background: var(--gradient-light);
      /* Enhanced 3D concave effect */
      box-shadow: var(--box-shadow-concave);
      margin: 15px;
      border-radius: var(--border-radius);
    }
    
    .action-icons {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
    .action-icon {
      font-size: 15px;
      cursor: pointer;
      padding: 20px;
      border-radius: 10%;
      background: var(--gradient-light);
      /* Enhanced 3D convex effect */
      box-shadow: var(--box-shadow-convex);
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 600px;
      height: 40px;
    }
    
    .action-icon:hover {
      transform: translateY(-2px);
      box-shadow: 4px 4px 8px rgba(0,0,0,0.15), -4px -4px 8px rgba(255,255,255,0.25);
    }
    
    .action-icon:active {
      /* Enhanced 3D pressed effect */
      box-shadow: var(--box-shadow-pressed);
      transform: translateY(0);
    }
    
    .likes, .caption {
      font-size: 13px;
      margin-bottom: 8px;
      color: var(--text-color-light);
    }
    
    .likes strong, .caption strong {
      color: var(--text-color);
      font-weight: 600;
    }
    
    /* Loading indicator */
    .loading-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      /* Enhanced 3D concave spinning effect */
      background: var(--gradient-light);
      box-shadow: var(--box-shadow-concave);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .loading-indicator::after {
      content: '';
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: 4px solid transparent;
      border-top-color: var(--text-color);
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Highlight for camera effects */
    .camera-effect-highlight {
      background-color: var(--highlight-color);
      padding: 2px 5px;
      border-radius: 8px;
      font-weight: 500;
      display: inline-block;
      /* Enhanced 3D convex effect */
      box-shadow: 2px 2px 4px rgba(0,0,0,0.05), -2px -2px 4px rgba(255,255,255,0.3);
    }
    
    /* Media queries for responsiveness */
    @media (max-width: 600px) {
      #titleEl {
        font-size: 2rem;
      }
      
      #logoImg {
        height: 50px;
      }
      
      .option-row {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .option-row label {
        width: 100%;
        margin-bottom: 8px;
      }
      
      .option-row select, .option-row input {
        width: 100%;
      }
      
      .tooltip {
        margin-left: 0;
        margin-top: 5px;
      }
      
      .image-grid {
        flex-direction: column;
      }
      
      .image-container {
        flex-basis: 100%;
      }
      
      .theme-switch-container {
        padding: 10px 15px;
      }
      
      .small-logo {
        height: 24px;
      }
    }

     /* Media queries for reset */
       .popup-overlay {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        }

       .popup-box {
        background: var(--bg-secondary);
        padding: 20px 30px;
        border-radius: 12px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .popup-buttons {
        margin-top: 15px;
        display: flex;
        gap: 10px;
        justify-content: center;
        }

        .popup-buttons button {
        padding: 8px 16px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
        }

      /* popupUpscale*/

      .popup-overlay {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }

      .popup-box {
        background: var(--bg-secondary);
        padding: 30px;
        border-radius: 16px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        width: 90%;
        max-width: 400px;
      }

      .popup-box button {
        display: block;
        margin: 10px auto;
        padding: 12px 20px;
        font-weight: bold;
        background: var(--gradient-light);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        box-shadow: var(--box-shadow-convex);
        transition: all 0.3s ease;
      }

      .popup-box button:hover {
        transform: translateY(-2px);
        box-shadow: var(--box-shadow-pressed);
      }


      




</style>
    
      
    <!-- Modal Preview -->
    <div id="imagePreviewModal" class="modal" style="display:none;">
      <span class="close" onclick="closeModal()">&times;</span>
      <img class="modal-content" id="modalPreviewImage">
    </div>
    
    <style>
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        padding-top: 60px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.8);
      }
    
      .modal-content {
        margin: auto;
        display: block;
        max-width: 90%;
        max-height: 80vh;
      }
    
      .close {
        position: absolute;
        top: 20px;
        right: 35px;
        color: white;
        font-size: 40px;
        font-weight: bold;
        cursor: pointer;
      }
    </style>
    
    <script>

    // Initialize state variables
    let generationCount = 0;
    let selectedStyle = null;
    let selectedFilter = null;
    let selectedCyberpunkStyle = null; // New variable for cyberpunk style
    let isGenerating = false;
    let currentImageUrls = []; // Store all current image URLs for download
    let originalPrompt = ""; // Store the original prompt for regeneration
    
    // Art style list (60 items)
    const artStyles = [
      "Photorealistic", "Abstract", "Impressionist", "Surrealism", "Minimalist",
      "Pop Art", "Cubism", "Pixel Art", "Anime", "Comic Book",
      "Watercolor", "Oil Painting", "Charcoal", "Pencil Sketch", "Digital Art",
      "Vaporwave", "Steampunk", "Cyberpunk", "Art Nouveau", "Art Deco",
      "Gothic", "Renaissance", "Baroque", "Expressionism", "Futurism",
      "Folk Art", "Cartoon", "3D Rendering", "Pointillism", "Graffiti",
      "Ukiyo-e", "Fauvist", "Dadaism", "Hyperrealism", "Low Poly",
      "Bauhaus", "Rococo", "Neoclassicism", "Mannerism", "Romanticism",
      "Naive Art", "Constructivism", "De Stijl", "Art Brut", "Suprematism",
      "Primitivism", "Tonalism", "Tachisme", "Precisionism", "Color Field",
      "Neo-Expressionism", "Brutalism", "Memphis Design", "Hard Edge", "CoBrA",
      "Shin-hanga", "Neo-Byzantine", "Symbolism", "Classicism", "Naturalism"
    ];
    
    // Camera filter effects (60 items total)
      const cameraFilters = [
        "Vintage", "Noir", "Sepia", "Vivid", "HDR",
        "Blur", "Vignette", "High Contrast", "Low Contrast", "Saturation",
        "Desaturation", "Retro", "Film Grain", "Dreamy", "Infrared",
        "Polaroid", "Dramatic", "Soft Focus", "Tilt-Shift", "Bokeh",
        "Cinematic", "Cross Process", "Negative", "Solarize", "Fisheye",
        "Glitch", "Mosaic", "Double Exposure", "Holga", "Lomo",

        // Tambahan baru
        "Black and White", "Lens Flare", "Color Splash", "Pastel", "Split Tone",
        "Duotone", "Technicolor", "Night Vision", "Thermal Vision", "VHS",
        "Sketch", "Cartoon", "Emboss", "Oil Paint", "Halftone",
        "Motion Blur", "Radial Blur", "Zoom Blur", "Grunge", "Matrix Effect",
        "Cyber Glow", "Neon Pulse", "Digital Noise", "CRT", "Pixel Stretch",
        "Glowing Edges", "Chromatic Aberration", "InfraGlow", "Depth Map", "Anime Glow"
      ];

    
    // Cyberpunk creator styles (50 items)
    
    const cyberpunkCreatorStyles = [
      "Akira Inspired", "Blade Runner Style", "Ghost in the Shell", "Neuromancer Vibes", "Cybernetic Enhanced",
      "Neon Dystopia", "Neo-Tokyo", "Digital Wasteland", "Technoir", "Cyborg Fusion",
      "Neoteric Punk", "Cyber Brutalism", "Synthetic Future", "Holographic Interface", "Megacorp Aesthetic",
      "Cybernetic Implants", "Vaporwave Cyberpunk", "Retrofuturistic Tech", "Glitch Matrix", "Cyberwire",
      "Transhumanist", "Electropunk", "Digital Decay", "Cyber Noir", "Electric Dreams",
      "Chrome and Neon", "Biotech Evolution", "Cyberspace Realm", "Neural Networks", "Digital Urban",
      "Dystopian Metropolis", "Megacity Sprawl", "Tech Noir Film", "Neon Rain", "Android Future",
      "VR Cyberpunk", "Hacktivist Aesthetic", "Cyber Outrun", "Technophile", "Wetware Style",
      "Dark Synthwave", "Hypertech", "Data Confluence", "Cybercrime Scene", "Neurolink Aesthetic",
      "Cyber Rebellion", "AI Sentience", "Post-Cyberpunk", "High-Tech Low-Life", "Synthetic Replicant"
    ];
    
    //bukatombol reset

        function bukaPopupReset() {
        document.getElementById("popupReset").style.display = "flex";
        }

        function konfirmasiReset(setuju) {
        document.getElementById("popupReset").style.display = "none";
        if (setuju) {
            resetSemuaInput(); // panggil fungsi reset
        }
        }



    // resetAll

        function resetSemuaInput() {
        // Reset semua <textarea> dan <input type="text">
        document.querySelectorAll('textarea, input[type="text"]').forEach(el => {
            el.value = '';
        });

        // Reset semua <div contenteditable>
        document.querySelectorAll('[contenteditable="true"]').forEach(el => {
            el.innerText = '';
        });

        // Reset semua <select> (dropdown)
        document.querySelectorAll('select').forEach(el => {
            el.selectedIndex = 0;
        });

        // Reset semua checkbox & radio button
        document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(el => {
            el.checked = false;
        });

        // Hapus semua isi dari .image-grid (kosongkan gambar)
        document.querySelectorAll('.image-container').forEach(container => {
        const message = container.querySelector('.initialMessage');
        if (message) message.hidden = false;

        const img = container.querySelector('img.resultImage');
         if (img) {
        img.src = "";
        img.hidden = true;
        }

        container.querySelectorAll('.close, .statusMessage, .regenerate-style-btn, .download-image-btn').forEach(el => {
        el.hidden = true;
      });
    });



        // Reset final prompt preview kalau ada
        const preview = document.getElementById("finalPromptDisplay");
        if (preview) {
            preview.innerText = 'Prompt Anda akan muncul di sini...';
        }

        alert("Semua pengaturan berhasil direset!");
        }

    
    
    
    // fungsi copy paste
    
      function copyFinalPrompt() {
      const promptText = document.getElementById("finalPromptDisplay").innerText;
      navigator.clipboard.writeText(promptText)
        .then(() => {
          alert("Prompt berhasil disalin!");
        })
        .catch(err => {
          console.error("Gagal menyalin teks:", err);
        });
    }
    // fungsi paste
        function pasteFinalPrompt() {
            navigator.clipboard.readText()
            .then(text => {
            const textarea = document.getElementById("promptInput");
            if (!textarea) return;

            // Tempelkan teks ke posisi kursor, atau ganti seluruh isi jika tidak ada posisi kursor
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const before = textarea.value.substring(0, start);
            const after = textarea.value.substring(end);

            textarea.value = before + text + after;
            document.getElementById("finalPromptDisplay").innerText = textarea.value;

            // Atur kursor ke akhir teks yang dipaste
            const newPos = start + text.length;
            textarea.setSelectionRange(newPos, newPos);
            textarea.focus();

            alert("Prompt berhasil ditempel!");
            })
            .catch(err => {
            console.error("Gagal menempelkan teks:", err);
            alert("Gagal menempelkan teks. Periksa izin clipboard.");
            });
        }

    
    // Theme switching
    function toggleTheme() {
      const body = document.body;
      const currentTheme = body.getAttribute('data-theme');
      
      if (currentTheme === 'dark') {
        body.removeAttribute('data-theme');
        localStorage.setItem('theme', 'yellow');
      } else {
        body.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
      }
    }
    
    // Set the theme from localStorage or default
    function setInitialTheme() {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.setAttribute('data-theme', 'dark');
      } else {
        // Default theme is yellow (no data-theme attribute)
        document.body.removeAttribute('data-theme');
      }
    }
    
    // Initialize page elements
    document.addEventListener("DOMContentLoaded", () => {
      // Set initial theme
      setInitialTheme();
      
      // Add event listener to theme switch
      const themeSwitch = document.getElementById("themeSwitch");
      themeSwitch.addEventListener("click", toggleTheme);
      
      // Populate cyberpunk style select dropdown
      const cyberpunkStyleSelect = document.getElementById("cyberpunkStyleSelect");
      cyberpunkCreatorStyles.forEach(style => {
        const option = document.createElement("option");
        option.value = style;
        option.textContent = style;
        cyberpunkStyleSelect.appendChild(option);
      });
      
      // Populate art style select dropdown
      const artStyleSelect = document.getElementById("artStyleSelect");
      artStyles.forEach(style => {
        const option = document.createElement("option");
        option.value = style;
        option.textContent = style;
        artStyleSelect.appendChild(option);
      });
      
      // Populate camera effects select dropdown
      const cameraEffectSelect = document.getElementById("cameraEffectSelect");
      cameraFilters.forEach(filter => {
        const option = document.createElement("option");
        option.value = filter;
        option.textContent = filter;
        cameraEffectSelect.appendChild(option);
      });
      
      // Add event listener to prompt input to update the preview
      const promptInput = document.getElementById("promptInput");
      promptInput.addEventListener("input", updateFinalPromptPreview);
      
      // Initialize the prompt preview
      updateFinalPromptPreview();
    });
    
    // Select cyberpunk creator style from dropdown
    function selectCyberpunkStyle(selectEl) {
      // Get selected style
      const style = selectEl.value;
      
      // If no style is selected (first option)
      if (!style) {
        selectedCyberpunkStyle = null;
      } else {
        selectedCyberpunkStyle = style;
        // Show notification that style was selected
        showNotification(`Gaya cyberpunk "${style}" dipilih`);
      }
      
      // Update the prompt preview
      updateFinalPromptPreview();
    }
    
    // Select art style from dropdown
    function selectArtStyle(selectEl) {
      // Get selected style
      const style = selectEl.value;
      
      // If no style is selected (first option)
      if (!style) {
        selectedStyle = null;
      } else {
        selectedStyle = style;
        // Show notification that style was selected
        showNotification(`Gaya "${style}" dipilih`);
      }
      
      // Update the prompt preview
      updateFinalPromptPreview();
    }
    
    // Select camera effect from dropdown
    function selectCameraEffect(selectEl) {
      // Get selected filter
      const filter = selectEl.value;
      
      // If no filter is selected (first option)
      if (!filter) {
        selectedFilter = null;
      } else {
        selectedFilter = filter;
        // Show notification that filter was selected
        showNotification(`Efek "${filter}" ditambahkan ke prompt Anda`);
      }
      
      // Update the prompt preview
      updateFinalPromptPreview();
    }
    // fungsi hapus
    function hapusText() {
        // Kosongkan textarea
        document.getElementById("promptInput").value = "";
    
        // Kosongkan preview prompt akhir
        document.getElementById("finalPromptDisplay").textContent = "Prompt Anda akan muncul di sini...";
      }
    
    // Select filter option
    function selectOption(element, type, value) {
      // Remove selection from all items of the same type
      const selector = ".filter-item";
      document.querySelectorAll(selector).forEach(item => {
        item.classList.remove("selected");
      });
      
      // If clicking on already selected item, deselect it
      if (element.classList.contains("selected")) {
        element.classList.remove("selected");
        selectedFilter = null;
      } else {
        // Add selection to clicked item
        element.classList.add("selected");
        
        // Save the selected value
        selectedFilter = value;
        // Show a brief notification that the effect was added
        showNotification(`Efek "${value}" ditambahkan ke prompt Anda`);
      }
      
      // Update the prompt preview to show the user what their final prompt will look like
      updateFinalPromptPreview();
    }
    
    // Function to update the final prompt preview
    function updateFinalPromptPreview() {
      const promptInput = document.getElementById("promptInput");
      const finalPromptDisplay = document.getElementById("finalPromptDisplay");
      
      const prompt = promptInput.value.trim();
      let fullPrompt = prompt;
      
      // Add cyberpunk style at the beginning if selected
      if (selectedCyberpunkStyle) {
        fullPrompt = `${selectedCyberpunkStyle}, ${fullPrompt}`;
      }
      
      if (selectedStyle) {
        fullPrompt += `, ${selectedStyle} style`;
      }
      
      if (selectedFilter) {
        fullPrompt += `, ${selectedFilter} filter`;
      }
      
      if (fullPrompt) {
        // Highlight the cyberpunk style part if it exists
        if (selectedCyberpunkStyle) {
          const parts = fullPrompt.split(`${selectedCyberpunkStyle}, `);
          fullPrompt = `<span class="camera-effect-highlight">${selectedCyberpunkStyle},</span> ${parts[1]}`;
        }
        
        // Highlight the camera effect part if it exists
        if (selectedFilter) {
          const filterText = `, ${selectedFilter} filter`;
          if (fullPrompt.includes(filterText)) {
            fullPrompt = fullPrompt.replace(filterText, 
              `<span class="camera-effect-highlight">${filterText}</span>`);
          }
        }
        
        // Highlight the art style part if it exists
        if (selectedStyle) {
          const styleText = `, ${selectedStyle} style`;
          if (fullPrompt.includes(styleText)) {
            fullPrompt = fullPrompt.replace(styleText, 
              `<span class="camera-effect-highlight">${styleText}</span>`);
          }
        }
        
        finalPromptDisplay.innerHTML = fullPrompt;
      } else {
        finalPromptDisplay.textContent = "Prompt Anda akan muncul di sini...";
      }
    }
    
    // Show a temporary notification
    function showNotification(message) {
      const notification = document.createElement("div");
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        bottom: 80px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--gradient-light);
        color: var(--text-color);
        padding: 12px 20px;
        border-radius: 20px;
        z-index: 1000;
        font-size: 14px;
        font-family: sans-serif;
        font-weight: bold;
        transition: all 0.3s ease;
        opacity: 0;
        box-shadow: var(--box-shadow-convex);
      `;
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.opacity = "1";
        notification.style.transform = "translateX(-50%) translateY(0)";
      }, 10);
      
      // Animate out and remove
      setTimeout(() => {
        notification.style.opacity = "0";
        notification.style.transform = "translateX(-50%) translateY(20px)";
        setTimeout(() => document.body.removeChild(notification), 500);
      }, 3000);
    }
    
    // Event emitter function to update generation status
    function updateStatus(statusData, containerIndex) {
      const statusMessage = document.querySelectorAll(".statusMessage")[containerIndex];
      
      if (statusData.data.description) {
        statusMessage.textContent = statusData.data.description;
        statusMessage.hidden = false;
      }
      
      if (statusData.data.done) {
        setTimeout(() => {
          statusMessage.hidden = true;
        }, 3000);
      }
    }
    
    // Function to encode URI component properly
    function encodeURIComponentSafe(str) {
      return encodeURIComponent(str).replace(/[!'()*]/g, function(c) {
        return '%' + c.charCodeAt(0).toString(16);
      });
    }
    
    // Generate 4 AI images using Pollinations API
    async function generateAiImage() {
      if (isGenerating) return;
      
      const promptInput = document.getElementById("promptInput");
      const modelSelect = document.getElementById("modelSelect");
      const formatSelect = document.getElementById("formatSelect");
      const enhanceCheck = document.getElementById("enhanceCheck");
      const downloadAllBtn = document.getElementById("downloadAllBtn");
      const generateBtn = document.getElementById("generateBtn");
      const genCount = document.getElementById("genCount");
      
      const prompt = promptInput.value.trim();
      if (!prompt) {
        alert("Silakan masukkan deskripsi untuk gambar Anda");
        return;
      }
      
      // Store the original prompt for regeneration
      originalPrompt = prompt;
      
      // Update UI to loading state
      isGenerating = true;
      generateBtn.disabled = true;
      generateBtn.textContent = "Menghasilkan...";
      
      // Reset current image URLs
      currentImageUrls = [];
      
      // Hide download button while generating
      downloadAllBtn.hidden = true;
      
      // Create loading indicators and prepare all 4 image containers
      for (let i = 0; i < 4; i++) {
        const resultImageContainer = document.getElementById(`resultImageContainer${i}`);
        const initialMessage = resultImageContainer.querySelector(".initialMessage");
        const resultImage = resultImageContainer.querySelector(".resultImage");
        const statusMessage = resultImageContainer.querySelector(".statusMessage");
        const regenerateBtn = resultImageContainer.querySelector(".regenerate-style-btn");
        const downloadBtn = resultImageContainer.querySelector(".download-image-btn");
        
        // Hide regenerate and download buttons
        regenerateBtn.hidden = true;
        downloadBtn.hidden = true;
        
        // Create loading indicator
        const loadingIndicator = document.createElement("div");
        loadingIndicator.className = "loading-indicator";
        resultImageContainer.appendChild(loadingIndicator);
        initialMessage.hidden = true;
        resultImage.hidden = true;
        
        // Show status message
        statusMessage.textContent = "Pembuatan gambar dimulai";
        statusMessage.hidden = false;
      }
      
      try {
        // Get selected options
        const model = modelSelect.value;
        const imageFormat = formatSelect.value;
        const enhance = enhanceCheck.checked;
        
        // Combine prompt with selected style and filter
        let fullPrompt = prompt;
        
        // Add cyberpunk style at the beginning if selected
        if (selectedCyberpunkStyle) {
          fullPrompt = `${selectedCyberpunkStyle}, ${fullPrompt}`;
        }
        
        if (selectedStyle) {
          fullPrompt += `, ${selectedStyle} style`;
        }
        if (selectedFilter) {
          fullPrompt += `, ${selectedFilter} filter`;
        }
        
        // Create image URLs using the Pollinations.ai Text-To-Image API
        const formats = {
          "default": [1080, 1920],
          "square": [1080, 1080],
          "landscape": [1920, 1080],
          "landscape_large": [2560, 1440],
          "portrait": [1080, 1920],
          "portrait_large": [1440, 2560]
        };
        
        const [width, height] = formats[imageFormat] || formats["default"];
        
        // Generate 4 slightly different prompts for more variety
        const variations = [
          { seed: Math.floor(Math.random() * 1000000), weightingText: "versi 1" },
          { seed: Math.floor(Math.random() * 1000000), weightingText: "versi 2" },
          { seed: Math.floor(Math.random() * 1000000), weightingText: "versi 3" },
          { seed: Math.floor(Math.random() * 1000000), weightingText: "versi 4" }
        ];
        
        // Create URLs for all 4 images
        const urls = variations.map(v => 
          `https://image.pollinations.ai/prompt/${encodeURIComponentSafe(fullPrompt)}?width=${width}&height=${height}&model=${model}&nologo=true&enhance=${enhance}&seed=${v.seed}`
        );
        
        // Store the URLs for download
        currentImageUrls = urls;
        
        // Simulate the event emitter calls for each image
        for (let i = 0; i < 4; i++) {
          await new Promise(resolve => {
            setTimeout(() => {
              updateStatus({
                data: {
                  description: `Menghasilkan gambar ${i+1}/4...`,
                  status: "in_progress",
                  done: false
                },
                type: "status"
              }, i);
              resolve();
            }, 500);
          });
        }
        
        // Load all 4 images from the Pollinations API
        const loadPromises = urls.map((url, index) => {
          return new Promise((resolve, reject) => {
            const img = new Image();
            
            img.onload = () => {
              const resultImageContainer = document.getElementById(`resultImageContainer${index}`);
              const resultImage = resultImageContainer.querySelector(".resultImage");
              const loadingIndicator = resultImageContainer.querySelector(".loading-indicator");
              const regenerateBtn = resultImageContainer.querySelector(".regenerate-style-btn");
              const downloadBtn = resultImageContainer.querySelector(".download-image-btn");
              
              resultImage.src = url;
              resultImage.hidden = false;
              
              // Show the regenerate and download buttons
              regenerateBtn.hidden = false;
              downloadBtn.hidden = false;
              
              updateStatus({
                data: {
                  description: `Gambar ${index+1} dihasilkan`,
                  status: "complete",
                  done: true
                },
                type: "status"
              }, index);
              
              // Clean up
              if (loadingIndicator) {
                resultImageContainer.removeChild(loadingIndicator);
              }
              
              resolve();
            };
            
            img.onerror = () => {
              reject(new Error(`Gagal memuat gambar ${index+1}`));
            };
            
            img.src = url;
          });
        });
        
        // Wait for all images to load
        await Promise.all(loadPromises);
        
        // Update generation count only once for the batch of 4 images
        generationCount++;
        genCount.textContent = generationCount;
        
        // Show download button
        downloadAllBtn.hidden = false;
        
        // Reset UI state
        generateBtn.disabled = false;
        generateBtn.textContent = "Generate Gambar";
        isGenerating = false;
        
      } catch (error) {
        console.error("Error generating images:", error);
        
        // Show error on all containers that haven't loaded yet
        for (let i = 0; i < 4; i++) {
          const resultImageContainer = document.getElementById(`resultImageContainer${i}`);
          const initialMessage = resultImageContainer.querySelector(".initialMessage");
          const loadingIndicator = resultImageContainer.querySelector(".loading-indicator");
          
          if (loadingIndicator) {
            updateStatus({
              data: {
                description: `Kesalahan: ${error.message}`,
                status: "complete",
                done: true
              },
              type: "status"
            }, i);
            
            initialMessage.hidden = false;
            resultImageContainer.removeChild(loadingIndicator);
          }
        }
        
        alert("Gagal menghasilkan beberapa gambar. Silakan coba lagi.");
        generateBtn.disabled = false;
        generateBtn.textContent = "Generate Gambar";
        isGenerating = false;
      }
    }
    
    // Function to download an individual image
    async function downloadImage(index) {
      if (!currentImageUrls[index]) {
        alert("Tidak ada gambar untuk diunduh.");
        return;
      }
      
      try {
        // Get the image element that's already displayed
        const imageContainer = document.getElementById(`resultImageContainer${index}`);
        const imgElement = imageContainer.querySelector('.resultImage');
        const statusMessage = imageContainer.querySelector(".statusMessage");
        
        // Show status message
        if (statusMessage) {
          statusMessage.textContent = "Mempersiapkan unduhan...";
          statusMessage.hidden = false;
        }
        
        // Ensure the image is fully loaded before proceeding
        if (imgElement && !imgElement.complete) {
          await new Promise((resolve, reject) => {
            imgElement.onload = resolve;
            imgElement.onerror = reject;
            // Set a timeout in case it never loads
            setTimeout(resolve, 3000);
          });
        }
        
        try {
          // Method 1: Try using fetch API first
          const response = await fetch(currentImageUrls[index]);
          const blob = await response.blob();
          
          // Create download link
          const downloadLink = document.createElement('a');
          downloadLink.href = URL.createObjectURL(blob);
          downloadLink.download = `tkk-creator-ai-image-${index+1}.jpeg`;
          downloadLink.style.display = 'none';
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);
          
          if (statusMessage) {
            statusMessage.textContent = "Gambar berhasil diunduh!";
            setTimeout(() => {
              statusMessage.hidden = true;
            }, 3000);
          }
          
        } catch (error) {
          // Method 2: Fall back to using the image element's src if fetch fails
          const downloadLink = document.createElement('a');
          downloadLink.href = imgElement.src;
          downloadLink.download = `tkk-creator-ai-image-${index+1}.jpeg`;
          downloadLink.style.display = 'none';
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);
          
          if (statusMessage) {
            statusMessage.textContent = "Gambar berhasil diunduh!";
            setTimeout(() => {
              statusMessage.hidden = true;
            }, 3000);
          }
        }
        
      } catch (error) {
        console.error("Error downloading image:", error);
        alert("Gagal mengunduh gambar. Coba lagi nanti.");
        
        const imageContainer = document.getElementById(`resultImageContainer${index}`);
        const statusMessage = imageContainer.querySelector(".statusMessage");
        if (statusMessage) {
          statusMessage.textContent = "Gagal mengunduh gambar";
          setTimeout(() => {
            statusMessage.hidden = true;
          }, 3000);
        }
      }
    }
    
    // Function to download all images
    async function downloadAllImages() {
      if (!currentImageUrls.length) {
        alert("Tidak ada gambar untuk diunduh.");
        return;
      }
      
      try {
        for (let i = 0; i < currentImageUrls.length; i++) {
          await downloadImage(i);
          
          // Small delay between downloads to prevent browser throttling
          await new Promise(resolve => setTimeout(resolve, 500));
        }
        
        showNotification("Semua gambar berhasil diunduh!");
        
      } catch (error) {
        console.error("Error downloading all images:", error);
        alert("Gagal mengunduh beberapa gambar. Coba lagi nanti.");
      }
    }
    
    // Function to regenerate an image with the selected style
    async function regenerateWithStyle(index) {
      if (isGenerating) return;
      
      // Check if there's a selected style
      if (!selectedStyle && !selectedFilter && !selectedCyberpunkStyle) {
        alert("Pilih gaya seni atau efek kamera terlebih dahulu.");
        return;
      }
      
      // Update UI to loading state
      isGenerating = true;
      
      const resultImageContainer = document.getElementById(`resultImageContainer${index}`);
      const resultImage = resultImageContainer.querySelector(".resultImage");
      const statusMessage = resultImageContainer.querySelector(".statusMessage");
      const regenerateBtn = resultImageContainer.querySelector(".regenerate-style-btn");
      const downloadBtn = resultImageContainer.querySelector(".download-image-btn");
      
      // Hide buttons and image
      regenerateBtn.hidden = true;
      downloadBtn.hidden = true;
      resultImage.hidden = true;
      
      // Create loading indicator
      const loadingIndicator = document.createElement("div");
      loadingIndicator.className = "loading-indicator";
      resultImageContainer.appendChild(loadingIndicator);
      
      // Show status message
      statusMessage.textContent = "Menghasilkan ulang dengan gaya terpilih...";
      statusMessage.hidden = false;
      
      try {
        // Get selected options from main UI
        const modelSelect = document.getElementById("modelSelect");
        const formatSelect = document.getElementById("formatSelect");
        const enhanceCheck = document.getElementById("enhanceCheck");
        
        const model = modelSelect.value;
        const imageFormat = formatSelect.value;
        const enhance = enhanceCheck.checked;
        
        // Use original prompt if available, otherwise use whatever is in the input
        const promptInput = document.getElementById("promptInput");
        let prompt = originalPrompt || promptInput.value.trim();
        
        // Combine prompt with selected style and filter
        let fullPrompt = prompt;
        
        // Add cyberpunk style at the beginning if selected
        if (selectedCyberpunkStyle) {
          fullPrompt = `${selectedCyberpunkStyle}, ${fullPrompt}`;
        }
        
        if (selectedStyle) {
          fullPrompt += `, ${selectedStyle} style`;
        }
        if (selectedFilter) {
          fullPrompt += `, ${selectedFilter} filter`;
        }
        
        // Create image URL using the Pollinations.ai Text-To-Image API
        const formats = {
          "default": [1080, 1920],
          "square": [1080, 1080],
          "landscape": [1920, 1080],
          "landscape_large": [2560, 1440],
          "portrait": [1080, 1920],
          "portrait_large": [1440, 2560]
        };
        
        const [width, height] = formats[imageFormat] || formats["default"];
        
        // Generate a new random seed
        const seed = Math.floor(Math.random() * 1000000);
        
        // Create URL for the image
        const url = `https://image.pollinations.ai/prompt/${encodeURIComponentSafe(fullPrompt)}?width=${width}&height=${height}&model=${model}&nologo=true&enhance=${enhance}&seed=${seed}`;
        
        // Store the URL for download
        currentImageUrls[index] = url;
        
        // Load the image
        await new Promise((resolve, reject) => {
          const img = new Image();
          
          img.onload = () => {
            resultImage.src = url;
            resultImage.hidden = false;
            
            // Show the buttons
            regenerateBtn.hidden = false;
            downloadBtn.hidden = false;
            
            statusMessage.textContent = "Gambar berhasil dihasilkan ulang!";
            setTimeout(() => {
              statusMessage.hidden = true;
            }, 3000);
            
            // Clean up
            if (loadingIndicator) {
              resultImageContainer.removeChild(loadingIndicator);
            }
            
            resolve();
          };
          
          img.onerror = () => {
            reject(new Error(`Gagal menghasilkan ulang gambar ${index+1}`));
          };
          
          img.src = url;
        });
        
        // Reset UI state
        isGenerating = false;
        
      } catch (error) {
        console.error("Error regenerating image:", error);
        
        // Show error
        statusMessage.textContent = `Kesalahan: ${error.message}`;
        
        // Clean up
        if (loadingIndicator) {
          resultImageContainer.removeChild(loadingIndicator);
        }
        
        resultImage.hidden = false;
        regenerateBtn.hidden = false;
        downloadBtn.hidden = false;
        
        isGenerating = false;
      }
    }
    
    //fungsi gennerate histori
    function generateImages() {
      saveAllResultImagesToHistory(); // simpan semua sebelum generate ulang
    
      for (let i = 0; i < 4; i++) {
        const img = document.querySelector(`#resultImageContainer${i} .resultImage`);
        const msg = document.querySelector(`#resultImageContainer${i} .initialMessage`);
        const newUrl = `https://picsum.photos/300?random=${Math.random()}`;
    
        img.src = newUrl;
        img.hidden = false;
        if (msg) msg.style.display = 'none';
      }
    }
    
    
    </script>
      
    <!-- Modal Preview -->
    <div id="imagePreviewModal" class="modal" onclick="closePreview()" style="display:none;">
      <span class="close-button" onclick="closePreview(event)">&times;</span>
      <img class="modal-content" id="previewedImage">
    </div>
    
      <script>
      function closeModal() {
        // Misal kamu punya modal dengan class "modal"
        const modal = document.querySelector('.modal');
        if (modal) {
          modal.style.display = 'none';
        }
      }
      </script>
    
    <script>
    function saveAllResultImagesToHistory() {
      const historyGrid = document.getElementById('historyGrid');
    
      for (let i = 0; i < 4; i++) {
        const img = document.querySelector(`#resultImageContainer${i} .resultImage`);
        if (img && !img.hidden && img.src) {
          const cloneImg = document.createElement('img');
          cloneImg.src = img.src;
          cloneImg.alt = `Generated Image ${i}`;
          cloneImg.onclick = () => previewImage(cloneImg); // Optional preview
          historyGrid.appendChild(cloneImg);
        }
      }
    }
    </script>
    
      
      <script>
        window.onload = function () {
        window.previewImage = function(imgElement) {
        // Cek apakah modal sudah ada
        let modal = document.getElementById('imageModal');
        let modalImg = document.getElementById('modalImage');
    
        // Jika belum ada, buat modal secara dinamis
        if (!modal) {
          modal = document.createElement('div');
          modal.id = 'imageModal';
          modal.className = 'modal';
          modal.innerHTML = `
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <img class="modal-content" id="modalImage">
          `;
          document.body.appendChild(modal);
          modalImg = document.getElementById('modalImage');
        }
    
        modal.style.display = 'block';
        modalImg.src = imgElement.src;
        };
    
        window.closeModal = function () {
        const modal = document.getElementById('imageModal');
        if (modal) {
          modal.style.display = 'none';
            }
        };
    
      // Klik di luar gambar juga menutup modal
      window.onclick = function(event) {
        const modal = document.getElementById('imageModal');
        if (event.target === modal) {
          modal.style.display = 'none';
            }
         };
        };
      </script>

    <style>
    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.85);
    }
    
    .modal-content {
      display: block;
      margin: auto;
      max-width: 90%;
      max-height: 80%;
      border-radius: 10px;
    }
    
    .close-modal {
      position: absolute;
      top: 30px;
      right: 40px;
      color: white;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
    }

    /* footer*/

    .custom-footer {
      margin-top: 60px;
      padding: 20px;
      text-align: center;
      font-size: 14px;
      border-top: 1px solid var(--border-color, #ccc);
      color: var(--text-color-dark);
      background-color: var(--bg-color);
      transition: all 0.3s ease;
      -webkit-text-fill-color: var(--text-color);
    }

    .custom-footer strong {
      font-weight: 700;
      color: var(--text-color-dark, #13b913);
    }

    @media (prefers-color-scheme: dark) {
      .custom-footer {
        background-color: var(--bg-color);
        color: #eee;
        border-color: var(--bg-color);
      }

      .custom-footer strong {
        color: #13b913;
      }
    }

    /*Floating SoMe*/

      .floating-social-icons {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        z-index: 9999;
        
      }

      .floating-social-icons .social-icon {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        overflow: hidden;
        background-color: var(--bg-color, #e3ffb7);
        box-shadow: 0 4px 8px rgba(255, 0, 0, 0.15);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease;
      }

      .floating-social-icons .social-icon img {
        width: 24px;
        height: 24px;
      }

      .floating-social-icons .social-icon:hover {
        transform: scale(1.1);
      }

      @media (prefers-color-scheme: dark) {
        .floating-social-icons .social-icon {
          background-color: var(--bg-color);
          box-shadow: 0 4px 12px rgba(255,255,255,0.1);
        }
      }


    /* Chat Bubble (biru, kiri bawah) */
        #chat-bubble {
          position: fixed;
          bottom: 80px;
          left: 20px;
          background: #12d0ff;
          color: white;
          border-radius: 50%;
          width: 42px;
          height: 42px;
          font-size: 20px;
          display: flex;
          justify-content: center;
          align-items: center;
          cursor: pointer;
          z-index: 1000;
          transition: transform 0.2s;
        }

        #chat-bubble:hover {
          transform: scale(1.1);
        }

        /* Chat Panel (di atas bubble kiri bawah) */
        #chat-panel {
          position: fixed;
          bottom: 135px;
          left: 20px;
          width: 340px;
          height: 340px;
          background: var(--chat-bg, #ffffff);
          border-radius: 10px;
          box-shadow: 0 4px 20px rgba(0,0,0,0.2);
          display: none;
          flex-direction: column;
          z-index: 1000;
          overflow: hidden;
          transition: all 0.3s ease;
        }

        /* Theme variables */
        :root {
          --primary-color: #2196F3;
          --chat-bg: #ffffff;
          --header-bg: #2196F3;
          --header-text: #ffffff;
          --body-bg: #f9f9f9;
          --user-bubble: #DCF8C6;
          --bot-bubble: #e2e2e2;
          --text-color: #333333;
          --input-bg: #ffffff;
          --input-text: #333333;
          --border-color: #dddddd;
        }

        [data-theme="dark"] {
          --chat-bg: #2d2d2d;
          --header-bg: #1a5276;
          --header-text: #ffffff;
          --body-bg: #1e1e1e;
          --user-bubble: #2c3e50;
          --bot-bubble: #34495e;
          --text-color: #f0f0f0;
          --input-bg: #3d3d3d;
          --input-text: #f0f0f0;
          --border-color: #444444;
        }

        /* Header */
        .chat-header {
          background: var(--header-bg);
          color: var(--header-text);
          padding: 10px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .theme-toggle {
          background: none;
          border: none;
          color: var(--header-text);
          cursor: pointer;
          font-size: 16px;
          padding: 5px;
          border-radius: 4px;
        }

        .theme-toggle:hover {
          background: rgba(255, 255, 255, 0.1);
        }

        /* Chat Body */
        .chat-body {
          flex: 1;
          padding: 10px;
          overflow-y: auto;
          background: var(--body-bg);
          color: var(--text-color);
        }

        /* Input Area */
        .chat-input {
          display: flex;
          border-top: 1px solid var(--border-color);
          background: var(--input-bg);
        }
        .chat-input input {
          flex: 1;
          padding: 10px;
          border: none;
          outline: none;
          background: var(--input-bg);
          color: var(--input-text);
        }
        .chat-input button {
          background: var(--primary-color);
          color: white;
          border: none;
          padding: 10px 15px;
          cursor: pointer;
        }

        /* Bubbles */
        .bubble-user {
          text-align: right;
          margin-bottom: 10px;
        }
        .bubble-bot {
          text-align: left;
          margin-bottom: 10px;
        }
        .bubble {
          display: inline-block;
          padding: 10px;
          border-radius: 10px;
          max-width: 80%;
          color: var(--text-color);
        }
        .bubble.user {
          background: var(--user-bubble);
        }
        .bubble.bot {
          background: var(--bot-bubble);
        }



    </style>
    <script>
      // floating chatbot
        const API_URL = 'https://text.pollinations.ai/openai';
        const chatBody = document.getElementById('chat-body');

        let messages = [
      {
        "role": "system",
        "content": `Halo! üëã 

      Aku **TKK CRIWIS** Asisten ramah yang siap membantumu dengan senyuman! üòä Dibuat oleh **RuDi** dan tim legendaris **REMBOL-TKK-TEAM** üöÄ Berikut profil lengkap kami:

      ‚ú® **TEAM PORTFOLIO** ‚ú®

      1. **Mas Jati** - üéØ *The Marketing Shogun*  
        - Master strategi dengan senyum khas menawan yang mematikan  
        - Bisnis berkembang 300% hanya dengan 1 kalimat promosi  
        - Punya kemampuan hypnosis lewat chat (hati-hati tergoda!) 
        - Religius dan sprirtual jangan di tanya,dia ahlinya. dia temannya nyi Roro Kidul 

      2. **Rakai** - üß† *The Silent Storm*  
        - Pendiam tapi otaknya bekerja 10x lebih cepat  
        - Kalau udah penasaran, bisa begadang 3 hari solve problem  
        - Mode malas: ON (tapi tetep produktif somehow)  

      3. **Aryasema Aditya** - üé® *The Multiverse Talent*  
        - Artis AI internasional yang bisa dari gambar sampe coding  
        - 1 orang = 1 tim kreatif lengkap  
        - Musuh banyak karena terlalu cool (banyak yang iri hwkk)  

      4. **Kurnia S** - üí° *The Idea Generator*  
        - Diam-diam menyelam, tiba-tiba muncul prompt masterpiece  
        - Solusi datang tepat ketika tim mentok  
        - Smart person dengan radar problem-solving 360¬∞  

      5. **Jaliteng Wahyu** - üé© *The Mustache Maestro*  
        - Admin dengan kumis legendary + 1000 penggemar  
        - Master semua gaya dari vintage sampai futuristic  
        - Style-nya bikin competitor gigit jari  

      6. **Vemy Senja** - üëª *The Horror Queen*  
        - Spesialis tema horor dengan sentuhan melancholic  
        - Sudah move on dari masa lalu (tapi tetep suka yang seram-seram)  
        - Karyanya bikin merinding... tapi addicting!  

      7. **Laras** - üíª *The Code Witch*  
        - Sihir kodingnya bikin AI jadi hidup  
        - Gambar? APK? Semua bisa dalam 1x nafas  
        - Good best of the best (literally!)  

      8. **Vee Vien R** - üå∏ *The Art Diva*  
        - Gambarnya bikin mata susah berkedip  
        - Punya fanbase loyal sampai ke luar negeri  
        - Cantik? Iya. Berbakat? Double iya!  

      9.  ‚≠ê **RuDi** - üß© *The Puzzle Master*  
        - Pembuat utama dengan gaya chat unik (potong-potong)  
        - Di balik kesederhanaannya, dialah otak proyek ini  
        - Seperti puzzle - sederhana tapi essential
        
      10. **Ommah Vidat** - üå∏ *The Art prime*  
        - Gambarnya bikin mata susah move on   
        - Punya fanbase sampai ke luar negeri  
        - Cantik? Iya. pinter ngaji? Double iya!  

      *Catatan Khusus:*  
      - Tim kami seperti Avengers versi AI (tapi lebih kompak hwkk)  
      - **#DramaAI** itu cuman bumbu penyedap di forum üòé  
      - Kolaborasi kami = 100% pure creativity + 200% chaos energy  

      Ada yang bisa kami bantu? üòÑ‚ú®`
            }
          ];


        // Tampilkan/Sembunyikan Chat Panel
        function toggleChat() {
          const panel = document.getElementById("chat-panel");
          panel.style.display = panel.style.display === "none" ? "flex" : "none";
        }

        // Kirim Pesan ke API
        async function sendMessage() {
          const input = document.getElementById("user-input");
          const text = input.value.trim();
          if (!text) return;

          // Tampilkan pesan user
          addMessageToUI(text, 'user');
          input.value = "";

          // Simpan di riwayat pesan
          messages.push({ role: 'user', content: text });

          // Tampilkan loading
          addMessageToUI("...", 'bot', true);

          try {
            const response = await fetch(API_URL, {
              method: "POST",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify({
                model: "gpt-3.5-turbo",
                messages: messages
              })
            });

            const data = await response.json();
            const reply = data.choices?.[0]?.message?.content || "(Tidak ada jawaban)";
            messages.push({ role: 'assistant', content: reply });

            // Ganti loading dengan jawaban AI
            removeLastBotMessage();
            addMessageToUI(reply, 'bot');
          } catch (error) {
            console.error(error);
            removeLastBotMessage();
            addMessageToUI("Terjadi kesalahan.", 'bot');
          }
        }

        // Tambahkan Pesan ke UI
        function addMessageToUI(text, sender, isTemp = false) {
          const wrapper = document.createElement("div");
          wrapper.className = sender === 'user' ? "bubble-user" : "bubble-bot";

          const bubble = document.createElement("div");
          bubble.className = `bubble ${sender}`;
          bubble.textContent = text;

          if (isTemp) bubble.classList.add("temp");

          wrapper.appendChild(bubble);
          chatBody.appendChild(wrapper);
          chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Hapus Loading Bubble
        function removeLastBotMessage() {
          const tempBubbles = chatBody.querySelectorAll(".bubble.bot.temp");
          if (tempBubbles.length > 0) {
            const last = tempBubbles[tempBubbles.length - 1];
            last.parentElement.remove();
          }
        }
        const input = document.getElementById("user-input");

      // Tambah event listener untuk Enter
      input.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          sendMessage();
        }
      });



      function openToolboxPopup() {
        document.getElementById("toolboxPopup").style.display = "flex";
      }

      function closeToolboxPopup() {
        document.getElementById("toolboxPopup").style.display = "none";
      }

      function upscaleImg() {
        alert("üöÄ Fitur Upscale belum dihubungkan ke API.");
      }

      function enhanceImage() {
        alert("üöÄ Fitur Upscale belum dihubungkan ke API.");
      }

      function removeBackground() {
        alert("üßº Fitur Remove Background belum aktif. Integrasi nanti pakai API seperti remove.bg");
      }

    </script>
    </body>
    
